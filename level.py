import crate,objects,_core,status,environment,bonus_level,sound,item,npc,map_tools,_loc
from ursina import *

mt=map_tools
bn=bonus_level
env=environment
st=status
o=objects
cc=_core
c=crate
N=npc

## level is loaded
def free_level():
	sound.LevelMusic(T=status.level_index)
	cc.check_cstack()
	st.fails=0
	st.loading=False
	cc.level_ready=True
	if st.level_index == 3:
		sound.AmbienceSound()
		sound.WaterRiver()
	o.LODProcess()
	print('level '+str(st.level_index)+' loaded successfully')

## level settings
def main_instance(idx):
	st.loading=True
	st.level_index=idx
	day_m=_loc.day_m
	s_rm={0:(0,0,0),1:(-.3,1,-66.5),2:(0,1,-64.2),3:(0,0,-32.2),4:(0,.3,-64.2),5:(0,0,-64.2),6:(0,0,-32.2)}
	st.day_mode=day_m[idx]
	o.StartRoom(pos=s_rm[idx],lvID=idx)
	bn.load_bonus_level(idx)
	WEATHER={0:0,1:1,2:2,3:0,4:0,5:1,6:0}
	if idx == 5:
		st.weather_thunder=True
	else:
		st.weather_thunder=False
	env.env_switch(env=day_m[idx],wth=WEATHER[idx])

##levels
def developer_level():
	o.EndRoom(pos=(0,1.5,27),c=color.rgb32(80,100,80))##end
	Entity(model='cube',scale=(16,1,64),y=-.5,texture_scale=(16,64),collider='box',texture='grass')
	o.BonusPlatform(pos=(-2,0,-1))
	for CC in range(14):
		c.place_crate(ID=CC,p=(-3+CC/2,0,2),m=1,l=1)
		c.place_crate(ID=CC,p=(-3+CC/2,1.6,2),m=2,l=1)
	for GS in range(6):
		item.GemStone(pos=(-3+GS/2,.25,3),c=GS)
	item.EnergyCrystal(pos=(0,.5,3)) ##crystal
	for MM in range(12):
		npc.spawn(pos=(0,0,5+MM),mID=MM,mDirec=0,mTurn=0)
	for TR in range(3):
		item.TimeRelic(pos=(1+TR/2,.25,3),t=TR)
	mt.wumpa_double_row(POS=(-3,0,1),CNT=20)
	for gPL in range(6):
		o.GemPlatform(pos=(-2+gPL,.25,-5),t=gPL)
	invoke(free_level,delay=1)

def test():
	#o.EndRoom(pos=(1,2,-15),c=color.rgb32(200,210,200))
	Entity(model='cube',scale=(16,1,64),y=-.5,texture_scale=(16,64),collider='box',texture='grass')
	#npc.spawn(pos=(0,0,-24),mID=8,mDirec=0,mTurn=0)
	free_level()

def level1():##wood
	TS=16
	cG=color.green
	o.Water(pos=(0,.6,0),s=(10,128),c=color.rgb32(80,80,120),a=1)
	o.InvWall(pos=(-5,.5,-64),sca=(5.,10,200))
	o.InvWall(pos=(4.7,.5,-64),sca=(5.,10,200))
	o.BonusPlatform(pos=(1.4,1,-6))
	o.GemPlatform(pos=(-.3,1.2,-18),t=4)
	bn.gem_route1()
	#scene
	gs=1.6
	o.GrassSide(pos=(-4,gs,-47),ry=0)
	o.GrassSide(pos=(-4,gs,-16),ry=0)
	o.GrassSide(pos=(-4,gs,15),ry=0)
	o.GrassSide(pos=(-4,gs,46),ry=0)
	o.GrassSide(pos=(4,gs,-47),ry=180)
	o.GrassSide(pos=(4,gs,-16),ry=180)
	o.GrassSide(pos=(4,gs,15),ry=180)
	o.GrassSide(pos=(4,gs,46),ry=180)
	o.LevelScene(pos=(0,0,128),sca=(350,40,1))
	o.LevelScene(pos=(0,-20,127),sca=(350,40,1))
	#plants
	Entity(model='cube',texture='res/terrain/l1/bricks.png',scale=(9,2,.3),position=(0,-.2,-64.5),texture_scale=(9,2))
	o.TreeScene(pos=(-3.7,1,-63),s=.0175)
	o.TreeScene(pos=(-4.7,1,-63),s=.0175)
	o.TreeScene(pos=(3.6,1.2,-63.5),s=.0175)
	o.TreeScene(pos=(4.6,1.2,-63.5),s=.0175)
	o.TreeScene(pos=(-1.37,1.5,-46),s=.0175)
	o.TreeScene(pos=(1.32,1.5,-46),s=.0175)
	o.TreeScene(pos=(0,1.7,-26.4),s=.0175)
	o.TreeScene(pos=(3,1.7,10.6),s=.02)
	o.spawn_tree_wall(pos=(-4,2.3,-64),cnt=50,d=0)
	o.spawn_tree_wall(pos=(-4,2,-64),cnt=50,d=0)
	o.spawn_tree_wall(pos=(4.5,2.3,-64),cnt=50,d=1)
	o.spawn_tree_wall(pos=(4,2.3,-63),cnt=50,d=1)
	o.bush(pos=(.37,1.3,-26.5),s=2,c=color.orange)
	o.bush(pos=(1.5,1.4,-14.2),s=2,c=cG)
	o.bush(pos=(-1.5,1.4,-14.2),s=2,c=color.orange)
	o.bush(pos=(-1,1.4,-12),s=2,c=cG)
	o.bush(pos=(1,1.4,-12),s=2,c=color.orange)
	o.bush(pos=(2.43,1.5,10.7),s=2,c=cG)
	o.bush(pos=(-2,1.5,10.2),s=2,c=color.yellow)
	o.TreeScene(pos=(-1.5,1.6,19.3),s=.02)
	o.TreeScene(pos=(1.2,1.8,19.3),s=.02)
	o.TreeScene(pos=(-.2,1.5,-2.6),s=.02)
	o.TreeScene(pos=(1.1,1.5,11),s=.02)
	o.bush(pos=(2.43,1.4,23),s=3,c=cG)
	o.bush(pos=(-2.37,1.4,23),s=3,c=color.yellow)
	o.TreeScene(pos=(1,1.6,-34.6),s=.02)
	o.TreeScene(pos=(-1.4,1.6,-34.6),s=.02)
	o.TreeScene(pos=(-1.8,1.5,-21.5),s=.02)
	o.TreeScene(pos=(-1.5,1.5,-60.5),s=.02)
	o.TreeScene(pos=(1,1.5,-60.5),s=.02)
	o.TreeScene(pos=(-1.2,1.5,-54.5),s=.02)
	o.TreeScene(pos=(1.1,1.5,-53),s=.02)
	#platform grass
	bu_h=.85
	o.bush(pos=(-1,bu_h,-45.3),s=(1.2,.5,.1),c=cG)
	o.bush(pos=(.7,bu_h,-45.3),s=(1.2,.5,.1),c=cG)
	o.bush(pos=(-1.5,bu_h,-38.61),s=(1.4,.5,.1),c=cG)
	o.bush(pos=(-.6,bu_h,-38.611),s=(1.4,.5,.1),c=cG)
	o.bush(pos=(.5,bu_h,-38.609),s=(1.4,.5,.1),c=cG)
	o.bush(pos=(1.5,bu_h,-38.608),s=(1.4,.5,.1),c=cG)
	o.bush(pos=(-2,.9,-28.55),s=(1.4,.5,.1),c=cG)
	o.bush(pos=(.6,bu_h,-23.1),s=(1.4,.5,.1),c=cG)
	o.bush(pos=(-1.4,bu_h,-16.1),s=(1.4,.5,.1),c=cG)
	o.bush(pos=(-.6,bu_h,-16.11),s=(1.4,.5,.1),c=cG)
	o.bush(pos=(.2,bu_h,-16.12),s=(1.4,.5,.1),c=cG)
	o.bush(pos=(1.2,bu_h,-16.09),s=(1.6,.5,.1),c=cG)
	o.bush(pos=(0,1,-26.37),s=(3,2,.1),c=cG)
	o.bush(pos=(-1,1,-4.12),s=(1.5,1.5,.1),c=cG)
	o.bush(pos=(-2,1,-4.13),s=(1.5,1.5,.1),c=cG)
	o.bush(pos=(1.3,1,-4.13),s=(1.7,1.5,.1),c=cG)
	o.bush(pos=(1.1,1,-57),s=(2,1.5,.1),c=cG)
	o.bush(pos=(-.7,1,-55),s=(2,1.5,.1),c=color.orange)
	o.bush(pos=(-.8,3,22.75),s=(2,1.5,.1),c=color.rgb32(0,80,0))
	o.bush(pos=(.4,3,23),s=(2,1.5,.1),c=color.rgb32(0,80,0))
	o.bush(pos=(-.2,3.3,22.8),s=(2,1.5,.1),c=color.rgb32(0,80,0))
	#platform
	d0=.85
	o.mBlock(pos=(0,d0,-57),sca=(4,24))
	o.mBlock(pos=(0,d0,-36),sca=(4,5))
	o.mBlock(pos=(0,d0,-30),sca=(1,7))
	o.mBlock(pos=(-2,d0,-25),sca=(1,7))
	o.mBlock(pos=(.7,d0,-20),sca=(1,6))
	o.mBlock(pos=(0,d0,-14),sca=(4,4))
	o.mBlock(pos=(0,d0,-9.5),sca=(1,5))
	o.mBlock(pos=(0,d0,-5),sca=(1,4))
	o.mBlock(pos=(1.5,d0,-1.5),sca=(2,5))
	o.mBlock(pos=(1.5,d0,5.7),sca=(2,3))
	o.mBlock(pos=(1.5,d0,9.5),sca=(2,2))
	o.mBlock(pos=(-1.5,d0,-1.5),sca=(2,5))
	o.mBlock(pos=(-1.5,d0,4),sca=(2,3))
	o.mBlock(pos=(-1.5,d0,8.5),sca=(2,3))
	o.mBlock(pos=(0,d0,10),sca=(1,4))
	o.mBlock(pos=(0,d0,18),sca=(4,4))
	o.MossPlatform(p=(0,.5,-44),ptm=0)
	o.MossPlatform(p=(0,.5,-42),ptm=0)
	o.MossPlatform(p=(0,.5,-40),ptm=0)
	o.MossPlatform(p=(-2,.5,-6),ptm=0)
	o.MossPlatform(p=(0,.5,13.5),ptm=0)
	o.MossPlatform(p=(0,.5,15),ptm=0)
	#NPC
	N.spawn(mID=0,pos=(0,1.1,-52),mDirec=0,mTurn=0)
	N.spawn(mID=0,pos=(0,1.1,-38),mDirec=0,mTurn=0)
	N.spawn(mID=1,pos=(0,1.1,-15),mDirec=0,mTurn=0)
	#wumpa fruits
	wu_h=1.3
	mt.wumpa_plane(POS=(-.5,wu_h,-56.1),CNT=[4,4])
	mt.wumpa_plane(POS=(-.4,wu_h,-50),CNT=[4,4])
	mt.wumpa_row(POS=(0,wu_h,-44),CNT=4,WAY=2)
	mt.wumpa_row(POS=(0,wu_h,-40),CNT=4,WAY=2)
	mt.wumpa_plane(POS=(-.5,wu_h,-36.5),CNT=[4,4])
	mt.wumpa_row(POS=(0,wu_h,-33),CNT=14,WAY=1)
	mt.wumpa_row(POS=(-2,wu_h,-27),CNT=8,WAY=1)
	mt.wumpa_row(POS=(.6,wu_h,-22),CNT=8,WAY=1)
	mt.wumpa_plane(POS=(-.3,wu_h,-9),CNT=[3,3])
	mt.wumpa_plane(POS=(-.3,wu_h,-6),CNT=[3,3])
	mt.wumpa_plane(POS=(1.3,wu_h,-1.5),CNT=[3,3])
	mt.wumpa_plane(POS=(0,wu_h,16.3),CNT=[3,3])
	#crates
	CRP=1.16
	if not 4 in status.COLOR_GEM:
		c.place_crate(ID=16,p=(-.3,CRP,-58))
	mt.crate_block(ID=2,POS=(-1.8,CRP,3.3),CNT=[2,2,2])
	mt.crate_block(ID=1,POS=(-1.5,CRP,-2.5),CNT=[2,2,2])
	mt.crate_wall(ID=1,POS=(1,CRP,-56.5),CNT=[2,2])
	mt.crate_wall(ID=1,POS=(-1,CRP,-49),CNT=[2,2])
	c.place_crate(ID=5,p=(0,CRP,-54))
	mt.bounce_twin(POS=(-1,CRP,-36),CNT=1)
	mt.bounce_twin(POS=(1,CRP,-36),CNT=1)
	mt.crate_row(ID=1,POS=(-1.3,.9,-22.3),CNT=5,WAY=0)
	c.place_crate(ID=9,m=1,l=0,p=(-1.3,.9,-22.82))
	for aE in range(4):
		c.place_crate(ID=13,m=1,l=0,p=(-.98+.32*aE,.9,-22.82))
	mt.crate_row(ID=3,POS=(-1.3,.9,-27),CNT=3,WAY=0)
	mt.crate_row(ID=2,POS=(-1.3,2.56,-27),CNT=3,WAY=0)
	mt.crate_row(ID=1,POS=(1.8,.8,1.1),CNT=10,WAY=1)
	mt.crate_row(ID=0,POS=(-.1,.8,20.16),CNT=10,WAY=1)
	c.place_crate(ID=4,p=(.9,CRP,-3.9))
	c.place_crate(ID=3,m=1,l=0,p=(-2,CRP,-6))
	mt.crate_block(ID=1,POS=(-1.09,CRP,17),CNT=[2,2,2])
	mt.bounce_twin(POS=(1.1,CRP,18),CNT=2)
	#checkpoints
	c.place_crate(ID=6,p=(0,CRP,-46))
	c.place_crate(ID=6,p=(.6,CRP,-17.8))
	c.place_crate(ID=6,p=(0,CRP,11.1))
	#collectable
	if not st.level_index in st.CRYSTAL:
		item.EnergyCrystal(pos=(0,1.5,-13))
	#M_objects
	o.Corridor(pos=(0,.975,-13))
	o.EndRoom(pos=(1,2.4,28.2),c=color.rgb32(80,100,80))
	invoke(free_level,delay=3)

def level2():##snow
	o.spawn_ice_wall(pos=(-2.3,-.5,-58.6),cnt=8,d=0)
	o.spawn_ice_wall(pos=(2.3,-.5,-58.6),cnt=7,d=1)
	o.spawn_ice_wall(pos=(20,4,8),cnt=4,d=0)
	o.spawn_ice_wall(pos=(26,4,8),cnt=2,d=1)
	o.spawn_ice_wall(pos=(45,4,28),cnt=3,d=1)
	status.gem_death=False
	o.Water(pos=(12,-.5,-32),s=(32,128),c=color.cyan,a=1)
	o.Water(pos=(51,4.5,23.5),s=(64,40),c=color.cyan,a=1)
	Entity(model='quad',scale=(512,512,1),color=color.white,z=64)
	o.BonusPlatform(pos=(5,1.1,2.1))
	#invisible walls
	o.InvWall(pos=(16.5,9,1.75),sca=(30,15,.5))
	#cam trigger
	o.CamSwitch(pos=(.5,1.4,.9),sca=(4,.3,1))
	o.CamSwitch(pos=(.5,1.7,2.5),sca=(4,.2,.5))
	o.CamSwitch(pos=(6,1.8,2.4),sca=(.5,.2,.5))
	o.CamSwitch(pos=(7.4,2.3,2.4),sca=(1,.2,.5))
	o.CamSwitch(pos=(10.5,2.5,2.3),sca=(2,.2,.5))
	o.CamSwitch(pos=(16,2.9,2.3),sca=(7,.2,.5))
	o.CamSwitch(pos=(23,6,2.4),sca=(.6,.3,.5))
	o.CamSwitch(pos=(24.5,5,2.2),sca=(.3,2,.2))
	o.CamSwitch(pos=(23,3,2.2),sca=(1.5,.2,.2))
	o.CamSwitch(pos=(42,6.5,35),sca=(6,.3,1))
	o.CamSwitch(pos=(42,7,37),sca=(6,.7,1))
	#ice
	for i_ch in range(50):
		o.IceChunk(pos=(-4-random.uniform(-.5,-1),1.8,-63+i_ch*1.5),rot=(-90,30,0),typ=1)
		if i_ch < 38:
			o.IceChunk(pos=(2.9+random.uniform(.5,1),1.8,-63+i_ch*1.5),rot=(-90,-30,0),typ=1)
	for u_ch in range(20):
		o.IceChunk(pos=(18.2-random.uniform(-.5,-1),6.3,3.7+u_ch*1.5),rot=(-90,30,0),typ=1)
		if u_ch < 11:
			o.IceChunk(pos=(26.5+random.uniform(.5,1),6.3,3.7+u_ch*1.5),rot=(-90,-30,0),typ=1)
	for e_ch in range(20):
		o.IceChunk(pos=(45.4+random.uniform(.5,1),6.3,26+e_ch*1.5),rot=(-90,-30,0),typ=1)
	o.IceChunk(pos=(21.7,6,2.6),typ=1,rot=(-180,-90,0))
	o.IceChunk(pos=(24.4,6,2.6),typ=1,rot=(0,-90,0))
	o.IceChunk(pos=(21.2,5.3,3.2),typ=1,rot=(260,-90,0))
	o.IceChunk(pos=(24.8,5.3,3.2),typ=1,rot=(-80,-90,0))
	o.IceChunk(pos=(28,5.35,28.1),typ=1,rot=(-180,-90,0))
	o.IceChunk(pos=(28,7.8,28),typ=1,rot=(-180,-90,0))
	#dangers
	wlO=3.7
	o.WoodLog(pos=(10.5,wlO,2.2))
	o.WoodLog(pos=(8.2,wlO,2.2))
	o.Role(pos=(42.2,6.6,31),di=1)
	o.Role(pos=(42.2,6.6,32),di=0)
	#rock
	for ro in range(40):
		o.Rock(pos=(0+random.uniform(-3,3),-2,-61+ro*2))
		o.Rock(pos=(0+random.uniform(-4,4),-2,-59+ro*2))
	o.mBlock(pos=(0,.8,-59),sca=(3,6))
	o.mBlock(pos=(0,.8,-41),sca=(3,4))
	o.mBlock(pos=(0,.8,-20),sca=(3,4))
	o.mBlock(pos=(0,.8,0),sca=(3,4))
	#2d area
	o.mBlock(pos=(1.5,1.2,2.5),sca=(6,1))
	o.mBlock(pos=(6,1.5,2.5),sca=(1,1))
	o.mBlock(pos=(7.5,2,2.5),sca=(2,1))
	o.mBlock(pos=(10.5,2,2.5),sca=(2,1))
	o.mBlock(pos=(12,2.5,2.5),sca=(1,1))
	o.IceGround(pos=(15,2.125,2.5),sca=(5,1))
	o.mBlock(pos=(19,2.5,2.5),sca=(3,1))
	o.mBlock(pos=(23,2.5,2.5),sca=(2,1))
	o.mBlock(pos=(23,5.25,2.2),sca=(1,1.75))
	o.mBlock(pos=(24.5,3,2.5),sca=(1,1))
	o.mBlock(pos=(23,5.25,5.2),sca=(4,4))
	o.mBlock(pos=(23,5.25,23),sca=(2,7))
	o.mBlock(pos=(23.5,5.25,27),sca=(3,1))
	o.mBlock(pos=(31.8,5.248,26.98),sca=(3,1))
	o.mBlock(pos=(42,5.6,32),sca=(4,8))
	o.mBlock(pos=(42,6.2,38),sca=(4,4))
	#pillar
	phe=1.1
	o.pillar_twin(p=(-.75,phe,-56),ro_y=(-90,45,0))
	o.pillar_twin(p=(-.75,phe,-42.6),ro_y=(-90,45,0))
	o.pillar_twin(p=(-.75,phe,-39),ro_y=(-90,45,0))
	o.pillar_twin(p=(-.75,phe,-21.65),ro_y=(-90,45,0))
	o.pillar_twin(p=(-.75,phe,-18),ro_y=(-90,45,0))
	o.pillar_twin(p=(-.75,phe,-1.8),ro_y=(-90,45,0))
	o.pillar_twin(p=(22.25,5.35,7),ro_y=(-90,45,0))
	o.pillar_twin(p=(22.25,5.35,19.85),ro_y=(-90,45,0))
	o.pillar_twin(p=(22.25,5.35,26.3),ro_y=(-90,45,0))
	o.Ropes(pos=(-.5,.7,-56),le=55)
	o.Ropes(pos=(22.5,5.3,7),le=16)
	#npc
	npc.spawn(pos=(3,1.4,2.5),mID=4,mDirec=0,mTurn=0)
	npc.spawn(pos=(0,.9,1),mID=4,mDirec=0,mTurn=0)
	npc.spawn(pos=(14.5,2.7,2.5),mID=6,mDirec=0,mTurn=0)
	#planks
	_pl=.7
	#bridge1
	o.plank_bridge(pos=(0,_pl,-55),ro_y=0,typ=0,cnt=4,DST=1)
	o.plank_bridge(pos=(0,_pl,-50),ro_y=0,typ=1,cnt=5,DST=1.5)
	#bridge2
	o.plank_bridge(pos=(0,_pl,-38),ro_y=0,typ=0,cnt=2,DST=1)
	o.plank_bridge(pos=(0,_pl,-36),ro_y=0,typ=1,cnt=2,DST=.5)
	o.plank_bridge(pos=(0,_pl,-34),ro_y=0,typ=1,cnt=2,DST=.5)
	o.plank_bridge(pos=(0,_pl,-32),ro_y=0,typ=1,cnt=2,DST=.5)
	o.plank_bridge(pos=(0,_pl,-30),ro_y=0,typ=0,cnt=3,DST=.5)
	o.plank_bridge(pos=(0,_pl,-28),ro_y=0,typ=0,cnt=2,DST=.5)
	o.plank_bridge(pos=(0,_pl,-26),ro_y=0,typ=0,cnt=6,DST=.5)
	o.plank_bridge(pos=(0,_pl,-18),ro_y=0,typ=1,cnt=2,DST=.5)
	o.plank_bridge(pos=(0,_pl,-16),ro_y=0,typ=1,cnt=1,DST=.5)
	o.plank_bridge(pos=(0,_pl,-14),ro_y=0,typ=1,cnt=1,DST=.5)
	o.plank_bridge(pos=(0,_pl,-12),ro_y=0,typ=1,cnt=4,DST=.5)
	o.plank_bridge(pos=(0,_pl,-10),ro_y=0,typ=0,cnt=3,DST=.5)
	o.plank_bridge(pos=(0,_pl,-8),ro_y=0,typ=1,cnt=2,DST=.5)
	o.plank_bridge(pos=(0,_pl,-6),ro_y=0,typ=1,cnt=2,DST=.5)
	o.plank_bridge(pos=(0,_pl,-4),ro_y=0,typ=1,cnt=2,DST=.5)
	o.plank_bridge(pos=(0,_pl,-3),ro_y=0,typ=0,cnt=1,DST=.5)
	o.plank_bridge(pos=(23,5.3,8.3),ro_y=0,typ=0,cnt=3,DST=.5)
	o.plank_bridge(pos=(23,5.3,11),ro_y=0,typ=1,cnt=1,DST=.5)
	o.plank_bridge(pos=(23,5.3,13),ro_y=0,typ=1,cnt=2,DST=.5)
	o.plank_bridge(pos=(23,5.3,15),ro_y=0,typ=1,cnt=1,DST=.5)
	o.plank_bridge(pos=(23,5.3,16),ro_y=0,typ=1,cnt=1,DST=.5)
	o.plank_bridge(pos=(23,5.3,17),ro_y=0,typ=1,cnt=1,DST=.5)
	o.plank_bridge(pos=(23,5.3,18),ro_y=0,typ=1,cnt=1,DST=.5)
	o.plank_bridge(pos=(23,5.3,19),ro_y=0,typ=0,cnt=1,DST=.5)
	o.plank_bridge(pos=(25.2,5.3,27),ro_y=90,typ=1,cnt=12,DST=.45)
	#ptf object
	for ptf1 in range(4):
		for ptf2 in range(3):
			o.SnowPlatform(pos=(34+ptf1*1.5,5.8,27+ptf2*1.5))
	#walls
	for snw in range(7):
		o.SnowWall(pos=(-5+snw*5.4,.1,2.65))
		o.SnowWall(pos=(-5+snw*5.4,3.2,2.65))
	o.SnowWall(pos=(19,6.3,2.65))
	o.SnowWall(pos=(27,6.3,2.65))
	o.SnowWall(pos=(30,2,38))
	for sna in range(2):
		o.SnowWall(pos=(20+sna*5.4,5,28))
		o.SnowWall(pos=(20+sna*5.4,8.2,28))
	#crates
	h1=.75+.16
	h2=.925+.16
	h3=5.375+.16
	mt.crate_block(ID=1,POS=(.5,h2,-58),CNT=[2,2,2])
	mt.crate_plane(ID=2,POS=(-.7,h2,-57),CNT=[2,2])
	mt.crate_wall(ID=12,POS=(-.3,h2,-18.6),CNT=[3,3])
	c.place_crate(ID=1,p=(0,h1,-54))
	c.place_crate(ID=3,p=(0,h1,-51))
	c.place_crate(ID=2,p=(-.2,h1,-48))
	c.place_crate(ID=5,p=(-.7,h2,-42.1))
	c.place_crate(ID=11,p=(.8,h2,-18.6))
	c.place_crate(ID=12,p=(.2,h2,-15))
	c.place_crate(ID=12,p=(0,h1,-13))
	c.place_crate(ID=12,p=(-.3,h1,-10))
	c.place_crate(ID=12,p=(0,h1,-8))
	c.place_crate(ID=12,p=(-.2,h1,-6))
	c.place_crate(ID=12,p=(0,h1,-4))
	mt.crate_row(ID=2,POS=(18,2.625+.16,2.3),CNT=4,WAY=0)
	mt.crate_row(ID=3,POS=(21,2.6,2.3),CNT=3,WAY=0)
	c.place_crate(ID=8,p=(24.5,3.525+.16,2.2))
	c.place_crate(ID=8,p=(23.7,4.5,2.2))
	mt.crate_plane(ID=1,POS=(21.6,h3,5.4),CNT=[3,3])
	c.place_crate(ID=3,p=(23.2,5.45+.16,13))
	c.place_crate(ID=10,p=(37,h3+.48,30.4))
	c.place_crate(ID=5,p=(6.8,2.125+.16,2.3))
	c.place_crate(ID=5,p=(24.3,h3,5))
	mt.bounce_twin(POS=(24.5,h3,6),CNT=1)
	if not 1 in st.COLOR_GEM:
		c.place_crate(ID=16,p=(.75,.925+.16,-56.7))
	#checkpoints
	c.place_crate(ID=6,p=(-.2,h2,-40))
	c.place_crate(ID=6,p=(3.2,1.325+.16,2.3))
	c.place_crate(ID=6,p=(23,h3,4.2))
	c.place_crate(ID=6,p=(24.4,h3,27))
	#wumpa fruits
	whl=1.2
	mt.wumpa_plane(POS=(-.5,whl,-58.4),CNT=[3,3])
	mt.wumpa_plane(POS=(-.3,1.1,-46),CNT=[3,3])
	mt.wumpa_plane(POS=(-.3,1.1,-37),CNT=[3,3])
	mt.wumpa_plane(POS=(-.3,1.1,-29.5),CNT=[3,3])
	mt.wumpa_plane(POS=(-.3,1.1,-27.8),CNT=[2,2])
	mt.wumpa_plane(POS=(-.3,1.1,-24),CNT=[2,2])
	mt.wumpa_plane(POS=(-.3,1.1,-19.8),CNT=[3,3])
	mt.wumpa_double_row(POS=(-.5,1.5,2.25),CNT=8)
	mt.wumpa_double_row(POS=(5.7,1.8,2.25),CNT=3)
	mt.wumpa_double_row(POS=(13,2.85,2.25),CNT=12)
	mt.wumpa_plane(POS=(22.7,5.6,5),CNT=[3,3])
	mt.wumpa_plane(POS=(22.7,5.6,8.4),CNT=[3,3])
	mt.wumpa_plane(POS=(22.7,5.7,22),CNT=[3,3])
	mt.wumpa_double_row(POS=(25,5.6,27),CNT=16)
	#collecable
	if not st.level_index in st.CRYSTAL:
		item.EnergyCrystal(pos=(35.5,6.4,28.5))
	#end
	o.EndRoom(pos=(43,8,44),c=color.rgb32(80,80,120))
	#mt.crate_row(ID=11,POS=(19.96,2.96,2.5),WAY=0,CNT=4)
	invoke(free_level,delay=3)

def level3():##water
	#default
	o.EndRoom(pos=(1,3.7,88),c=color.rgb32(200,210,200))
	o.BonusPlatform(pos=(.85,1.3,.85*8))
	if not st.level_index in st.CRYSTAL:
		item.EnergyCrystal(pos=(0,2.5,60.5))
	if not 5 in st.COLOR_GEM:
		c.place_crate(ID=16,p=(0,.24+.16,-21))
	#foam
	#o.Foam(pos=())
	#cam switch
	o.CamSwitch(pos=(1,1.2,2.5),sca=(2,.2,6))
	o.CamSwitch(pos=(-.8,1.2,6.8),sca=(2,.2,1))
	o.CamSwitch(pos=(0,1.2,54.7),sca=(1,.2,1))
	o.CamSwitch(pos=(0,2.1,57.1),sca=(2,.2,1))
	#waterflow
	o.WaterFlow(pos=(0,-.3,-16),sca=(5,32))
	o.WaterFlow(pos=(0,.7,30),sca=(5,62))
	o.WaterFlow(pos=(0,1.7,73),sca=(5,32))
	#waterfall
	o.WaterFall(pos=(0,-.8,-1))
	o.WaterFall(pos=(0,.2,57))
	#foam
	o.Foam(pos=(0,-.29,-1.5))
	#scene
	o.SceneWall(pos=(-3.1,.65,-13),s=1)
	o.SceneWall(pos=(3,.5,-13),s=2)
	o.SceneWall(pos=(-3.1,1.7,16),s=1)
	o.SceneWall(pos=(3,1.7,16),s=2)
	o.SceneWall(pos=(-3.1,1.7,45),s=1)
	o.SceneWall(pos=(3,1.7,45),s=2)
	o.SceneWall(pos=(-3.1,2.4,74),s=1)
	o.SceneWall(pos=(3,2.4,74),s=2)
	#bush
	for wbu in range(16):
		o.bush(pos=(-3.2,2.7,-30+wbu*2),s=(2,2+random.uniform(.5,2.5),2),c=color.rgb32(0,100+random.uniform(20,100),0),ro_y=-35)
		o.bush(pos=(3.2,3,-31+wbu*2),s=(2,2+random.uniform(.5,2.5),2),c=color.rgb32(0,100+random.uniform(20,100),0),ro_y=35)
		o.bush(pos=(-3.2,3.5,1+wbu*2),s=(2,2+random.uniform(.5,2.5),2),c=color.rgb32(0,100+random.uniform(20,100),0),ro_y=-35)
		o.bush(pos=(3.2,3.5,1+wbu*2),s=(2,2+random.uniform(.5,2.5),2),c=color.rgb32(0,100+random.uniform(20,100),0),ro_y=35)
	for wba in range(32):
		o.bush(pos=(-3.2,4.2,31+wba*2),s=(2,2+random.uniform(.5,2.5),2),c=color.rgb32(0,100+random.uniform(20,100),0),ro_y=-35)
		o.bush(pos=(3.2,3.6,31+wba*2),s=(2,2+random.uniform(.5,2.5),2),c=color.rgb32(0,100+random.uniform(20,100),0),ro_y=35)
	#crate
	u0=.82
	mt.bounce_twin(POS=(-.85,.1,-26.5),CNT=1)
	mt.crate_block(ID=2,POS=(.5,.1,-27.1),CNT=[2,2,2])
	mt.crate_block(ID=1,POS=(-1.4,.24+.16,-21.6),CNT=[2,2,2])
	c.place_crate(ID=4,p=(1.2,.24+.16,-21.4))
	mt.crate_plane(ID=2,POS=(-.85,.16,-15),CNT=[3,3])
	mt.bounce_twin(POS=(-1.4,.24+.16,-11.5),CNT=1)
	mt.bounce_twin(POS=(1.6,.24+.16,-11.5),CNT=1)
	mt.crate_wall(ID=2,POS=(-.2,.16,-3.8),CNT=[2,2])
	mt.crate_wall(ID=1,POS=(.65,1.05+.16,2.5),CNT=[2,2])
	mt.crate_row(ID=1,POS=(0,u0,19.7),CNT=6,WAY=1)
	c.place_crate(ID=1,p=(0,u0,24.5))
	c.place_crate(ID=2,p=(0,u0,27.5))
	c.place_crate(ID=1,p=(0,u0,30.5))
	c.place_crate(ID=3,p=(0,u0,34.5))
	c.place_crate(ID=3,p=(0,u0,35.5))
	c.place_crate(ID=1,p=(-1,u0,35.5))
	c.place_crate(ID=2,p=(-1,u0,36.5))
	c.place_crate(ID=3,p=(-1,u0,37.5))
	c.place_crate(ID=3,p=(0,u0,37.5))
	c.place_crate(ID=1,p=(0,u0,38.5))
	c.place_crate(ID=4,p=(0,u0,39.5))
	mt.crate_plane(ID=1,POS=(-.7,u0,44),CNT=[3,3])
	mt.crate_plane(ID=1,POS=(.3,u0,48),CNT=[2,2])
	c.place_crate(ID=9,p=(1.3,1.16,52.4),m=1)
	for _c in range(10):
		c.place_crate(ID=13,p=(0,u0,52.4+.32*_c),m=1,l=0)
	mt.crate_plane(ID=1,POS=(-.36,1.8,69.8),CNT=[3,6])
	c.place_crate(ID=10,p=(.85,1.95+.16,80.85))
	mt.crate_wall(ID=1,POS=(-.2,1.05+.16,14.5),CNT=[2,2])
	mt.crate_row(ID=2,POS=(-.85,1.05+.16,40.4),CNT=4,WAY=1)
	c.place_crate(ID=7,p=(-1,2.04+.16,58.4))
	mt.crate_row(ID=2,POS=(-1,3.6,58.4),CNT=4,WAY=2)
	mt.bounce_twin(POS=(1,2.04+.16,58.4),CNT=1)
	#aku
	c.place_crate(ID=5,p=(-.85,1.05+.16,9.3))
	#checkpoints
	c.place_crate(ID=6,p=(0,.24+.16,-9.2))
	c.place_crate(ID=6,p=(0,1.05+.16,32.8))
	c.place_crate(ID=6,p=(.85,1.05+.16,44.6))
	c.place_crate(ID=6,p=(0,2.04+.16,58.5))
	#temple
	o.TempleWall(pos=(-2.55,-.3,-1.7),side=2)
	o.TempleWall(pos=(2.7,-.3,-1.7),side=1)
	o.TempleWall(pos=(-2.55,.7,27),side=2)
	o.TempleWall(pos=(2.7,.7,27),side=1)
	o.TempleWall(pos=(-2.55,.65,56.4),side=2)
	o.TempleWall(pos=(2.7,.65,56.4),side=1)
	#tree
	o.TreeScene(pos=(-2.3,2.2,82.5),s=.02)
	o.TreeScene(pos=(2.3,2.2,82.5),s=.02)
	o.TreeScene(pos=(-3,2.8,84),s=.02)
	o.TreeScene(pos=(2.4,2.8,84),s=.02)
	o.bush(pos=(-1,4,82),s=2,c=color.green)
	o.bush(pos=(0,4.3,82.1),s=2,c=color.green)
	o.bush(pos=(1,4,82.11),s=2,c=color.green)
	#stage
	o.WoodStage(pos=(0,.2,-20))
	o.WoodStage(pos=(0,.2,-10))
	o.WoodStage(pos=(0,2,60))
	#platforms
	o.MossPlatform(p=(0,-.3,-24.5),ptm=3)
	o.MossPlatform(p=(0,-.1,-1.3),ptm=0)
	o.MossPlatform(p=(0,.5,0),ptm=0)
	o.MossPlatform(p=(0,-.3,-7),ptm=0)
	o.MossPlatform(p=(-.3,.7,11.5),ptm=2)
	o.MossPlatform(p=(-.85,.5,52.5),ptm=3)
	o.MossPlatform(p=(.85,.5,52.5),ptm=0)
	o.MossPlatform(p=(0,1,56.5),ptm=0)
	#o.MossPlatform(p=(0,1.5,63.5),ptm=3)
	o.MossPlatform(p=(0,1.5,77),ptm=3)
	#blocks
	tH=-.2
	#e0
	o.multi_tile(p=(-.85,tH,-29),cnt=[3,4])
	o.multi_tile(p=(-1,tH,-17),cnt=[3,1])
	o.multi_tile(p=(-1,tH,-15),cnt=[3,3])
	o.multi_tile(p=(0,tH,-5),cnt=[1,4])
	#e1
	o.multi_tile(p=(.85,tH+1.1,0),cnt=[1,6])
	o.multi_tile(p=(-.85,tH+1.1,.85*5),cnt=[2,1])
	o.multi_tile(p=(-.85,tH+1.1,.85*5),cnt=[1,8])
	o.multi_tile(p=(0,tH+1.1,.85*8),cnt=[2,1])
	o.multi_tile(p=(0,tH+1.1,13),cnt=[1,3])
	o.StoneTile(pos=(0,tH+1.1,17))
	o.StoneTile(pos=(0,tH+1.1,19))
	o.multi_tile(p=(-.85,tH+1.1,23),cnt=[2,1])
	o.multi_tile(p=(0,tH+1.1,26),cnt=[2,1])
	o.multi_tile(p=(-.85,tH+1.1,29),cnt=[2,1])
	o.multi_tile(p=(0,tH+1.1,32),cnt=[1,2])
	o.multi_tile(p=(-.85,tH+1.1,40.5),cnt=[3,3])
	o.multi_tile(p=(.85,tH+1.1,40.5+.85*3),cnt=[1,4])
	o.multi_tile(p=(-.85,tH+1.1,40.5+.85*7),cnt=[3,1])
	o.multi_tile(p=(-.85,tH+1.1,40.5+.85*8),cnt=[1,4])
	#e3
	o.multi_tile(p=(0,1.7,57.4),cnt=[1,1])
	o.multi_tile(p=(0,1.8,66.5),cnt=[1,3])
	o.multi_tile(p=(0,1.8,66.5+.85*7),cnt=[1,4])
	o.multi_tile(p=(0,1.8,80),cnt=[1,5])
	o.multi_tile(p=(.85,1.8,80+.85),cnt=[1,1])
	#npc
	N.Hippo(pos=(0,1.8,64.7))
	N.Hippo(pos=(0,1.8,63))
	N.spawn(mID=7,pos=(-.85,1.05,29),mDirec=0,mTurn=0)
	N.spawn(mID=7,pos=(.85,1.05,25.8),mDirec=0,mTurn=0)
	N.spawn(mID=7,pos=(-.85,1.05,23),mDirec=0,mTurn=0)
	N.spawn(mID=7,pos=(0,1.05,41.4),mDirec=0,mTurn=0)
	N.spawn(mID=7,pos=(0,1.95,74.1),mDirec=0,mTurn=0)
	N.spawn(mID=2,pos=(0,1.05,4.2),mDirec=0,mTurn=0)
	invoke(free_level,delay=3)

def level4():## sewer
	o.BonusPlatform(pos=(1.4,.9,4.8))
	o.GemPlatform(pos=(4.2,2,31.7),t=5)
	bn.gem_route4()
	o.EndRoom(pos=(15.65,5.5,78.5),c=color.rgb32(180,180,180))
	o.EletricWater(pos=(0,.2,-48),sca=(8,96),ID=0)
	o.EletricWater(pos=(14.5,3.5,83),sca=(8,64),ID=1)
	Entity(model='cube',scale=(16,1,96),position=(0,-.5,-48),collider='box',color=color.black)
	Entity(model='cube',scale=(4,.5,5),position=(0,.5,1.5),texture_scale=(4,5),collider='box',texture='res/terrain/l4/metal_01.jpg')
	Entity(model='cube',scale=(4,.5,5),position=(14.5,3.5,52.25),texture_scale=(4,5),collider='box',texture='res/terrain/l4/metal_01.jpg')
	Entity(model='cube',scale=(16,1,64),position=(14.5,2.9,83),collider='box',visible=False)
	#tunels
	o.SewerTunnel(pos=(0,.4,-53))
	o.SewerTunnel(pos=(0,.4,-44))
	o.SewerTunnel(pos=(0,.4,-35))
	o.SewerTunnel(pos=(0,.4,-26))
	o.SewerEscape(pos=(0,-1,-22.7))
	o.SewerEscape(pos=(0,-1,-13))
	o.SewerEscape(pos=(0,-1,-3.3))
	o.SewerEscape(pos=(5,1,12),typ=1)
	o.SewerEscape(pos=(5,1,21.7),typ=1)
	o.SewerTunnel(pos=(14.5,3.7,63))
	o.SewerTunnel(pos=(14.5,3.7,58))
	o.SewerTunnel(pos=(14.5,3.7,68))
	o.SewerTunnel(pos=(14.5,3.7,78))
	#pipes decoration
	o.SewerPipe(pos=(2.9,0,9),typ=1)
	o.SewerPipe(pos=(2.9,-3.3,9),typ=1)
	o.SewerEntrance(pos=(.1,1,-25.1))
	o.SewerEntrance(pos=(5.2,2.75,9.7))
	o.SewerEntrance(pos=(5.2,2.75,8.7))
	o.SewerEntrance(pos=(5,2.75,29.3))
	o.SewerEntrance(pos=(14.5,4.75,49.7))
	o.DrippingWater(pos=(.08,2,-59),sca=(.5,.3))
	#walls
	Entity(model='quad',texture='res/terrain/l4/sewer_tiles.jpg',scale=(10,20),texture_scale=(10,20),position=(-2,1,9),color=color.rgb32(160,150,150))
	o.SewerPipe(pos=(-4,1,9),typ=2)
	o.SewerPipe(pos=(-2,1,9),typ=2)
	o.SewerPipe(pos=(0,1,9),typ=2)
	o.SewerPipe(pos=(2,1,9),typ=2)
	o.SewerPipe(pos=(-4,-.3,8.7),typ=0)
	o.SewerPipe(pos=(-2,-.3,8.7),typ=0)
	o.SewerPipe(pos=(0,-.3,8.7),typ=0)
	o.SewerPipe(pos=(2,-.3,8.7),typ=0)
	Entity(model='quad',texture='res/terrain/l4/sewer_tiles.jpg',scale=(20,20),texture_scale=(20,20),position=(3,1,49.7),color=color.rgb32(160,150,150))
	o.SewerPipe(pos=(4,3,49),typ=2)
	o.SewerPipe(pos=(6,3,49),typ=2)
	o.SewerPipe(pos=(8,3,49),typ=2)
	o.SewerPipe(pos=(10,3,49),typ=2)
	o.SewerPipe(pos=(4,1.5,49.4),typ=0)
	o.SewerPipe(pos=(6,1.5,49.4),typ=0)
	o.SewerPipe(pos=(8,1.5,49.4),typ=0)
	o.SewerPipe(pos=(10,1.5,49.4),typ=0)
	#platforms
	ph=.3
	pg=.65
	#e0
	o.swr_multi_ptf(p=(-.5,ph,-61.3),cnt=[3,3])
	o.swr_multi_ptf(p=(0,ph,-58.7),cnt=[1,5])
	o.swr_multi_ptf(p=(.6,ph,-50),cnt=[2,6])
	o.swr_multi_ptf(p=(-.8,ph,-42),cnt=[2,4])
	o.swr_multi_ptf(p=(0,ph,-30),cnt=[3,3])
	o.swr_multi_ptf(p=(-.9,ph,-23),cnt=[2,2])
	o.swr_multi_ptf(p=(-1,ph,-13),cnt=[1,3])
	o.swr_multi_ptf(p=(1.2,ph,-5),cnt=[1,3])
	o.swr_multi_ptf(p=(-.5,pg,4),cnt=[3,8])
	#e1
	o.swr_multi_ptf(p=(-.5,pg,(.5*16)),cnt=[6,1])
	o.swr_multi_ptf(p=(3,pg+.4,(.5*16)),cnt=[2,1])
	o.swr_multi_ptf(p=(4,pg+.7,(.5*16)),cnt=[2,1])
	o.swr_multi_ptf(p=(5,pg+1,(.5*16)),cnt=[2,9])
	o.swr_multi_ptf(p=(5,pg+1,(.5*27)),cnt=[2,1])
	o.swr_multi_ptf(p=(5,pg+1,(.5*30)),cnt=[2,4])
	o.swr_multi_ptf(p=(5,pg+1,(.5*36)),cnt=[2,2])
	o.swr_multi_ptf(p=(5.5,pg+1,(.5*37)),cnt=[1,8])
	o.swr_multi_ptf(p=(4.5,pg+1,(.5*44)),cnt=[2,1])
	o.swr_multi_ptf(p=(4.5,pg+1,(.5*45)),cnt=[1,6])
	o.swr_multi_ptf(p=(4.5,pg+1,(.5*51)),cnt=[2,1])
	o.swr_multi_ptf(p=(5,pg+1,(.5*52)),cnt=[1,8])
	o.swr_multi_ptf(p=(4,pg+1,(.5*60)),cnt=[5,5])
	o.swr_multi_ptf(p=(5,pg+1,(.5*66)),cnt=[1,6])
	o.swr_multi_ptf(p=(4,pg+1,(.5*72)),cnt=[5,1])
	o.swr_multi_ptf(p=(5,pg+1,(.5*73)),cnt=[1,3])
	o.swr_multi_ptf(p=(4,pg+1,(.5*78)),cnt=[5,5])
	o.swr_multi_ptf(p=(4.5,pg+1,(.5*85)),cnt=[3,3])
	o.swr_multi_ptf(p=(5,pg+1,(.5*89)),cnt=[1,8])
	o.swr_multi_ptf(p=(5,pg+1,(.5*97)),cnt=[6,1])
	o.swr_multi_ptf(p=(9,pg+1.5,(.5*97)),cnt=[2,1])
	o.swr_multi_ptf(p=(11,pg+1.5,(.5*97)),cnt=[2,1])
	o.swr_multi_ptf(p=(12.5,pg+2,(.5*97)),cnt=[1,1])
	o.swr_multi_ptf(p=(13.5,pg+2.5,(.5*97)),cnt=[1,1])
	o.swr_multi_ptf(p=(14.5,pg+3,(.5*97)),cnt=[1,3])
	#e2
	o.swr_multi_ptf(p=(14.5,pg+3,58),cnt=[2,2])
	o.swr_multi_ptf(p=(14,pg+3,66),cnt=[1,1])
	o.swr_multi_ptf(p=(13.5,pg+3,72.5),cnt=[5,3])
	#dangers
	o.SewerPipe(pos=(0,.9,.8),typ=3)
	#crates
	mt.crate_wall(ID=1,POS=(.25,.56,-60.54),CNT=[2,1])
	mt.crate_wall(ID=1,POS=(.62,.16,-54.53),CNT=[1,3])
	mt.crate_wall(ID=2,POS=(0,.16,-44.05),CNT=[2,1])
	mt.crate_wall(ID=2,POS=(.34,.56,-29.59),CNT=[2,2])
	mt.crate_wall(ID=2,POS=(.65,.16,-22.05),CNT=[1,2])
	mt.crate_wall(ID=3,POS=(.77,.16,-7.70),CNT=[2,1])
	mt.crate_wall(ID=2,POS=(1.18,.56,-4.22),CNT=[1,2])
	#nitro
	c.place_crate(ID=12,p=(5.27,1.9,17))
	c.place_crate(ID=7,p=(5.27,1.9+.32,17))
	c.place_crate(ID=3,p=(5.27,4,17))
	c.place_crate(ID=12,p=(-.58,.16,-56.8))
	c.place_crate(ID=12,p=(.78,.16,-52.2))
	c.place_crate(ID=12,p=(.06,.16,-43.4))
	c.place_crate(ID=12,p=(.52,.16,-37.2))
	c.place_crate(ID=12,p=(-.50,.16,-35.5))
	c.place_crate(ID=12,p=(.63,.16,-33.3))
	c.place_crate(ID=12,p=(.46,.56,-29.1))
	c.place_crate(ID=12,p=(-.65,.56,-22.7))
	c.place_crate(ID=12,p=(.14,.16,-17.1))
	c.place_crate(ID=12,p=(.99,.16,-15.3))
	c.place_crate(ID=12,p=(-.21,.16,-9.75))
	c.place_crate(ID=12,p=(-.72,.16,-6.8))
	c.place_crate(ID=12,p=(-.38,.16,-4.2))
	c.place_crate(ID=12,p=(-.96,.91,-.1))
	c.place_crate(ID=12,p=(.08,.91,-.1))
	c.place_crate(ID=12,p=(1.08,.91,-.1))
	c.place_crate(ID=12,p=(4.49,1.6,8))
	c.place_crate(ID=12,p=(3.53,1.3,8))
	c.place_crate(ID=12,p=(4.96,1.9,13.5))
	c.place_crate(ID=12,p=(5.04,1.9,21.9))
	c.place_crate(ID=12,p=(13.62,3.56,56.1))
	c.place_crate(ID=12,p=(15.27,3.56,56.1))
	c.place_crate(ID=12,p=(14.59,3.56,61))
	c.place_crate(ID=12,p=(13.77,3.56,63.1))
	c.place_crate(ID=12,p=(15.22,3.56,64.9))
	c.place_crate(ID=10,p=(13.74,3.9,72.7))
	mt.crate_block(ID=1,POS=(4.9,1.9,42.9),CNT=[2,2,2])
	mt.crate_block(ID=2,POS=(14.7,3.9,58.32),CNT=[2,2,2])
	mt.crate_block(ID=1,POS=(-.7,.9,2.2),CNT=[2,2,2])
	mt.crate_block(ID=1,POS=(5.255,1.9,15.6),CNT=[2,2,2])
	mt.crate_block(ID=1,POS=(5.759,1.9,31.59),CNT=[2,2,2])
	mt.crate_block(ID=1,POS=(15.257,3.9,72.61),CNT=[2,2,2])
	#checkpoints
	c.place_crate(ID=6,p=(-.5,.56,-40.8))
	c.place_crate(ID=6,p=(0,.91,3.6))
	c.place_crate(ID=6,p=(5,1.9,30.4))
	c.place_crate(ID=6,p=(14.5,3.9,49.9))
	#aku
	c.place_crate(ID=5,p=(.63,.6,-47.6))
	c.place_crate(ID=5,p=(.04,.9,6.4))
	c.place_crate(ID=5,p=(5,1.9,39.9))
	#npc
	npc.spawn(pos=(0,.4,-53.5),mID=12,mDirec=0,mTurn=0)
	npc.spawn(pos=(0,.4,-35.5),mID=12,mDirec=0,mTurn=0)
	npc.spawn(pos=(0,.4,-16),mID=12,mDirec=0,mTurn=0)
	npc.spawn(pos=(.75,.75,8),mID=11,mDirec=0,mTurn=0,ro_mode=0)
	npc.spawn(pos=(5.2,2.6,17),mID=10,mDirec=0,mTurn=0,ro_mode=2)
	npc.spawn(pos=(5.3,1.75,10.1),mID=11,mDirec=1,mTurn=0,ro_mode=0)
	npc.spawn(pos=(14.5,3.7,61.5),mID=12,mDirec=0,mTurn=0)
	npc.spawn(pos=(14.5,3.75,52),mID=10,mDirec=0,mTurn=0,ro_mode=1)
	npc.spawn(pos=(4.9,1.75,36),mID=11,mDirec=0,mTurn=0,ro_mode=0)
	npc.spawn(pos=(4.9,1.75,40),mID=11,mDirec=0,mTurn=0,ro_mode=1)
	npc.spawn(pos=(5,2,12.5),mID=13,mDirec=0,mTurn=0)
	npc.spawn(pos=(5.5,2,12.5),mID=13,mDirec=0,mTurn=0)
	#cam trigger
	o.CamSwitch(pos=(-.5,1.2,3),sca=(3,.5,8))
	o.CamSwitch(pos=(2.9,1.5,7.9),sca=(1,.5,.4))
	o.CamSwitch(pos=(4,1.85,7.9),sca=(1,.5,.4))
	o.CamSwitch(pos=(5.2,2.2,9.75),sca=(2,.5,6))
	o.CamSwitch(pos=(9.2,2.65,48.5),sca=(1,.5,.4))
	o.CamSwitch(pos=(12.5,3.15,48.5),sca=(1,.5,.4))
	o.CamSwitch(pos=(13.5,3.65,48.5),sca=(1,.5,.4))
	o.CamSwitch(pos=(14.5,4.1,48.5),sca=(1,.5,.4))
	if not st.level_index in st.CRYSTAL:
		item.EnergyCrystal(pos=(14,4.25,66))
	invoke(free_level,delay=3)

def level5():## ruins
	o.BonusPlatform(pos=(9+.75*6,.5,-22))
	o.GemPlatform(pos=(16.9,.4,-.1),t=2)
	o.FallingZone(pos=(0,-2,0),s=(128,.3,128))
	o.LevelScene(pos=(0,-20,120),sca=(350,100,1))
	o.RuinsPlatform(pos=(0,-.3,-56),m=True)
	o.RuinsPlatform(pos=(5.4,-.3,-56),m=False)
	o.spw_ruin_ptf(p=(0,-.3,-61),cnt=6,way=1)
	o.spw_ruin_ptf(p=(1.2,-.3,-56),cnt=5,way=0)
	o.spw_ruin_ptf(p=(1.2+.75*2,-.3,-55.25),cnt=5,way=1)
	o.spw_ruin_ptf(p=(1.2+.75*2,-.3,-50.5),cnt=1,way=1)
	o.RuinsCorridor(pos=(2.7,-.3,-47))
	o.spw_ruin_ptf(p=(1.2+.75*2,-.3,-44),cnt=7,way=1)
	o.spw_ruin_ptf(p=(1.2+.75*1,-.3,-44+.75*7),cnt=3,way=0)
	o.spw_ruin_ptf(p=(1.2+.75*2,-.3,-44+.75*9),cnt=1,way=0)
	o.spw_ruin_ptf(p=(1.2+.75*2,-.3,-44+.75*11),cnt=1,way=0)
	o.RuinsPlatform(pos=(2.7,-.3,-33),m=True)
	o.LoosePlatform(pos=(5,0,-33),t=0)
	o.LoosePlatform(pos=(6.5,0,-33),t=0)
	o.LoosePlatform(pos=(8,0,-33),t=0)
	o.spw_ruin_ptf(p=(9,-.3,-33),cnt=4,way=0)
	o.spw_ruin_ptf(p=(9+.75*4,-.3,-33),cnt=4,way=1)
	o.RuinsCorridor(pos=(12,-.3,-28.5))
	o.spw_ruin_ptf(p=(9+.75*4,-.3,-25),cnt=1,way=0)
	o.spw_ruin_ptf(p=(9+.75*4,-.3,-23.5),cnt=1,way=0)
	o.spw_ruin_ptf(p=(9+.75*4,-.3,-22),cnt=3,way=0)
	o.spw_ruin_ptf(p=(9+.75*4,-.3,-20.5),cnt=1,way=0)
	o.LoosePlatform(pos=(9+.75*4,0,-19),t=0)
	o.LoosePlatform(pos=(9+.75*4,0,-17.5),t=0)
	o.LoosePlatform(pos=(9+.75*4,0,-16),t=0)
	o.RuinsCorridor(pos=(12,-.3,-13))
	o.RuinsCorridor(pos=(12,-.3,-10))
	o.spw_ruin_ptf(p=(9+.75*4,-.3,-8.1),cnt=1,way=0)
	o.RuinsPlatform(pos=(12,-.3,-6.9),m=True)
	o.spw_ruin_ptf(p=(13.2,-.3,-7),cnt=6,way=1)
	o.spw_ruin_ptf(p=(13.2,-.3,-7+.75*8),cnt=1,way=1)
	o.spw_ruin_ptf(p=(14.7,-.3,-7+.75*8),cnt=5,way=0)
	o.LoosePlatform(pos=(19,0,-1),t=0)
	o.LoosePlatform(pos=(20.5,0,-1),t=0)
	o.spw_ruin_ptf(p=(22,-.3,-7+.75*8),cnt=4,way=0)
	o.spw_ruin_ptf(p=(22+.75*4,-.3,-7+.75*8),cnt=7,way=1)
	o.spw_ruin_ptf(p=(22+.75*6,-.3,-7+.75*8),cnt=4,way=0)
	o.RuinsPlatform(pos=(29.95,-.3,-7+.75*8),m=False)
	o.RuinsPlatform(pos=(25,-.3,4.65),m=True)
	for lp0 in range(3):
		o.LoosePlatform(pos=(26.6+lp0,.1+lp0/3,4.7),t=1)
	o.spw_ruin_ptf(p=(30,.6,4.7),cnt=6,way=0)
	o.spw_ruin_ptf(p=(30+.75*6,.6,4.7),cnt=6,way=1)
	o.spw_ruin_ptf(p=(30+.75*7,.6,4.7+.75*5),cnt=6,way=0)
	o.spw_ruin_ptf(p=(30+.75*12,.6,4.7),cnt=6,way=1)
	o.spw_ruin_ptf(p=(30+.75*13,.2,4.7),cnt=1,way=0)
	o.spw_ruin_ptf(p=(30+.75*14,-.2,4.7),cnt=1,way=0)
	o.spw_ruin_ptf(p=(30+.75*15,-.6,4.7),cnt=1,way=0)
	o.spw_ruin_ptf(p=(30+.75*16,-1,4.7),cnt=8,way=0)
	o.spw_ruin_ptf(p=(30+.75*24,-.6,4.7),cnt=1,way=0)
	o.spw_ruin_ptf(p=(30+.75*25,-.2,4.7),cnt=1,way=0)
	o.spw_ruin_ptf(p=(30+.75*25,.2,4.7+.75),cnt=1,way=0)
	o.spw_ruin_ptf(p=(30+.75*26,.6,4.7+.75),cnt=5,way=0)
	o.RuinsPlatform(pos=(35.5,.6,9.6),m=True)
	o.RuinsPlatform(pos=(37.175,.6,9.6),m=False)
	o.spw_ruin_ptf(p=(30+.75*31,.6,4.7+.75),cnt=5,way=1)
	o.LoosePlatform(pos=(53.2,.8,9.6),t=0)
	o.LoosePlatform(pos=(53.2,.8,11.1),t=0)
	o.LoosePlatform(pos=(53.2,.8,12.6),t=0)
	o.LoosePlatform(pos=(53.2,.8,14.1),t=0)
	for rn_x in range(4):
		for rn_z in range(3):
			o.spw_ruin_ptf(p=(51.7+.75*rn_x,.6,15+.75*rn_z),cnt=1,way=0)
	o.spw_ruin_ptf(p=(53.2-.75,.6,15+.75*3),cnt=5,way=1)
	o.spw_ruin_ptf(p=(53.2-.75,.6,15+.75*8),cnt=4,way=0)
	o.spw_ruin_ptf(p=(53.2+.75*3,.6,15+.75*8),cnt=8,way=1)
	o.spw_ruin_ptf(p=(53.2+.75*4,.6,15+.75*13),cnt=1,way=0)
	#npc
	N.spawn(mID=8,pos=(2.7,.2,-50.5),mDirec=0,mTurn=0)
	N.spawn(mID=8,pos=(2.7,.2,-35.7),mDirec=0,mTurn=0)
	N.spawn(mID=8,pos=(6.5,.25,-32.9),mDirec=0,mTurn=0)
	N.spawn(mID=8,pos=(11.9,.2,-23.5),mDirec=0,mTurn=0)
	N.spawn(mID=9,pos=(2.7,.2,-38.8),mDirec=0,mTurn=0)
	N.spawn(mID=9,pos=(24.2,.2,-1),mDirec=0,mTurn=0)
	N.spawn(mID=8,pos=(13.1,.2,-1),mDirec=0,mTurn=0)
	N.spawn(mID=9,pos=(34.5,1.1,6.5),mDirec=1,mTurn=0)
	N.spawn(mID=9,pos=(39,1.1,6.5),mDirec=1,mTurn=0)
	N.spawn(mID=8,pos=(53.2,1.1,8.3),mDirec=0,mTurn=0)
	N.spawn(mID=8,pos=(55.4,1.1,24),mDirec=0,mTurn=0)
	#sculpts
	o.MonkeySculpture(pos=(3.8,.2,-55),r=True,d=False)
	o.MonkeySculpture(pos=(1.7,.3,-42.4),r=False,d=True,ro_y=-90)
	o.MonkeySculpture(pos=(4,.3,-41.4),r=False,d=True,ro_y=90)
	o.MonkeySculpture(pos=(9.7,.3,-32),r=False,d=True,ro_y=0)
	o.MonkeySculpture(pos=(11,.3,-25),r=False,d=True,ro_y=-90)
	o.MonkeySculpture(pos=(26.5,.3,0),r=False,d=True,ro_y=0)
	o.MonkeySculpture(pos=(28,.3,0),r=False,d=True,ro_y=0)
	o.MonkeySculpture(pos=(42.7,-.5,5.5),r=False,d=True,ro_y=0)
	o.MonkeySculpture(pos=(44.2,-.5,5.5),r=False,d=True,ro_y=0)
	o.MonkeySculpture(pos=(45.7,-.5,5.5),r=False,d=True,ro_y=0)
	o.MonkeySculpture(pos=(47.2,-.5,5.5),r=False,d=True,ro_y=0)
	o.MonkeySculpture(pos=(51.4,1.1,17.2),r=False,d=True,ro_y=-90)
	o.MonkeySculpture(pos=(53.4,1.1,18.7),r=False,d=True,ro_y=90)
	o.MonkeySculpture(pos=(51.4,1.1,20.2),r=False,d=True,ro_y=-90)
	#cam trigger
	o.CamSwitch(pos=(25,.6,4.6),sca=(1.5,.3,1.5))
	o.CamSwitch(pos=(30.5,1.5,4.5),sca=(2,.3,1))
	o.CamSwitch(pos=(39,1.5,4.7),sca=(.5,.3,.5))
	o.CamSwitch(pos=(40.4,.7,4.7),sca=(.5,.3,.75))
	o.CamSwitch(pos=(44.7,-.1,4.7),sca=(5.5,.3,.75))
	o.CamSwitch(pos=(48.7,.6,4.7),sca=(.75,.3,.75))
	o.CamSwitch(pos=(50,1.4,5.4),sca=(2,.3,.75))
	#crystal
	if not st.level_index in st.CRYSTAL:
		item.EnergyCrystal(pos=(12,.8,-7))
	#crates
	mt.crate_row(ID=2,POS=(5.3,.36,-56),CNT=4,WAY=2)
	mt.crate_row(ID=1,POS=(5.3+.32,.36,-56),CNT=3,WAY=2)
	mt.crate_wall(ID=1,POS=(.3,.36,-55.6),CNT=[2,2])
	mt.crate_wall(ID=1,POS=(3.2,.36,-46.0),CNT=[2,2])
	mt.crate_wall(ID=2,POS=(2.8,.36,-32.7),CNT=[2,2])
	mt.crate_wall(ID=1,POS=(11.4,.36,-27.4),CNT=[2,2])
	mt.crate_wall(ID=1,POS=(11.2,.36,-11.9),CNT=[2,2])
	mt.crate_wall(ID=1,POS=(12.6,.36,-9.1),CNT=[2,2])
	mt.crate_wall(ID=2,POS=(13.1,.36,-4.4),CNT=[2,2])
	mt.crate_wall(ID=1,POS=(24.6,.36,5),CNT=[2,2])
	c.place_crate(ID=12,p=(-.2,.36,-55.6))
	c.place_crate(ID=12,p=(3.5,.36,-55.9))
	c.place_crate(ID=12,p=(3.3,.36,-47.5))
	c.place_crate(ID=12,p=(1.9,.36,-47.5))
	c.place_crate(ID=12,p=(1.9,.36,-46))
	c.place_crate(ID=12,p=(5.6,.36,-33.1))
	c.place_crate(ID=12,p=(2.5,.36,-37.2))
	c.place_crate(ID=12,p=(7.5,.36,-33))
	c.place_crate(ID=12,p=(11.3,.36,-11.5))
	c.place_crate(ID=12,p=(11.1,.36,-13.7))
	c.place_crate(ID=12,p=(12.6,.36,-13.7))
	c.place_crate(ID=12,p=(15.4,.36,-1))
	c.place_crate(ID=10,p=(56.2,1.26,24.7))
	#aku
	c.place_crate(ID=5,p=(4.8,.36,-56))
	c.place_crate(ID=5,p=(13.1,.36,-5.5))
	#checkpoints
	c.place_crate(ID=6,p=(11.980,0.360,-28.694))
	c.place_crate(ID=6,p=(25.440,0.360,4.571))
	c.place_crate(ID=6,p=(41.206,0.060,4.660))
	# end
	o.EndRoom(pos=(56.5,2.8,31.6),c=color.rgb32(180,180,180))
	free_level()